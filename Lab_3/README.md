# IP Fragment Reassembly Program

## Overview

This program implements the reassembly of IP fragments. Given an input file containing fragmented IP datagrams, the program parses the file, reassembles the fragments, and generates an output file indicating whether each datagram is complete or if errors are encountered during reassembly.

The program handles the following tasks:

- Parsing IP fragment information from a text file.
- Converting IP addresses from dotted decimal to unsigned long using `inet_addr` for efficient comparison.
- Reassembling IP fragments based on IP address and ID.
- Reporting results in an output file, including errors such as "Missing Fragment", "Mismatch in length", "Overlapping fragments", "Incomplete fragments", or "Reason Unknown".

## File Structure

```bash
.
├── datagram.c        # Implementation for managing IP datagram fragments
├── datagram.h        # Header file for datagram structures and functions
├── fragment.h        # Header file defining fragment structures
├── main.c            # Main program that drives the reassembly process
├── parser.c          # Functions for parsing input file and converting data
├── parser.h          # Header file for parser functions
├── Makefile          # Makefile to build the executable
├── output.txt        # Output file generated by the program
├── test.txt          # Sample input file containing fragment information
```

## Input File Format

Each line in the input file represents a fragment and contains the following space-separated fields:

```bash
IPsourceaddr ID fragOffset MF Length
```

- **IPsourceaddr**: Source IP in dotted decimal format (e.g., `192.168.1.1`)
- **ID**: Datagram identification number
- **fragOffset**: Fragment offset in bytes
- **MF**: More Fragments flag (0 or 1)
- **Length**: Data length in bytes (excluding IP header)

Example:

```bash
192.168.1.1 101 0 1 1480
192.168.1.1 101 1480 0 520
```

## Output

The output is written to a file specified as the second command line argument. For each `(IPsourceaddr, ID)` combination, the output includes:

- Source IP (in dotted decimal format)
- ID
- Total length if the datagram is complete
- Error description if reassembly fails (`Missing Fragment`, `Mismatch in length`, `Reason Unknown`)

## Compilation

To compile the program, use the provided Makefile:

```bash
make
```

This will generate an executable named `ip_reassembly`.

To clean the build files:

```bash
make clean
```

## Usage

Run the program with two command line arguments: input file and output file.

```bash
./ip_reassembly <input_file> <output_file>
```

Example:

```bash
./ip_reassembly test.txt output.txt
```

## Author

**Gedela Uday Kiran**
M.Tech AI, University of Hyderabad
